{"version":3,"sources":["webpack:///./src/components/searchForm.js","webpack:///./src/components/searchResults.js","webpack:///./src/pages/search.js"],"names":["SearchForm","query","role","method","htmlFor","type","id","name","aria-control","onChange","e","navigate","encodeURIComponent","target","value","SearchResults","results","aria-label","length","className","aria-live","map","title","user","key","Search","data","location","useState","setResults","searchQuery","URLSearchParams","search","get","useEffect","window","__LUNR__","__loaded","then","lunr","images","en","index","ref","store","console","log"],"mappings":"6JAmBeA,EAhBI,SAAC,GAAD,IAAEC,EAAF,EAAEA,MAAF,OAEf,0BAAMC,KAAK,SAASC,OAAO,OACvB,2BAAOC,QAAQ,gBAAe,4CAC9B,2BACIC,KAAK,SACLC,GAAG,eACHC,KAAK,WACLC,eAAa,uBACbC,SAAU,SAACC,GAAD,OAAOC,mBAAS,oBAAoBC,mBAAmBF,EAAEG,OAAOC,SAC1EA,MAAOb,IAEX,4BAAQI,KAAK,UAAb,YCgBOU,EA7BO,SAAC,GAAD,IAAGd,EAAH,EAAGA,MAAOe,EAAV,EAAUA,QAAV,OAClB,6BAASC,aAAW,kCACbD,EAAQE,QAAUjB,GAEjB,wBAAIkB,UAAU,uBACVC,YAAU,aADd,SAEQJ,EAAQE,OAFhB,cAEmCjB,EAFnC,OAIDe,EAAQE,QACP,wBAAIC,UAAU,uBACTH,EAAQK,KAAI,gBACTC,EADS,EACTA,MACAC,EAFS,EAETA,KAFS,OAKL,yBAAKC,IAAKF,GACN,wBAAIH,UAAU,gCACV,2BAAIG,GACJ,2BAAIC,WCiBrBE,UA/BA,SAAC,GAIV,EAHFC,KAGG,IAFHC,EAEE,EAFFA,SAEE,EAC4BC,mBAAS,IAAhCZ,EADL,KACca,EADd,KAEIC,EAAc,IAAIC,gBAAgBJ,EAASK,QAAQC,IAAI,aAAe,GAY5E,OAXAC,qBAAU,WACFC,OAAOC,UACPD,OAAOC,SAASC,SAASC,MAAK,SAAAC,GAE1B,IACMC,EADOD,EAAKE,GAAGC,MAAMV,OAAOF,GACdT,KAAI,gBAAGsB,EAAH,EAAGA,IAAH,OAAaJ,EAAKE,GAAGG,MAAMD,MACnDd,EAAWW,GACXK,QAAQC,IAAI9B,QAGrB,CAACW,EAASK,SAET,kBAAC,IAAD,CACIL,SAAUA,GAEV,kBAAC,EAAD,CAAY1B,MAAO6B,IACnB,kBAAC,EAAD,CACI7B,MAAO6B,EACPd,QAASA","file":"component---src-pages-search-js-bf0feb9e37cd481c5f2a.js","sourcesContent":["import React from 'react';\nimport { navigate } from 'gatsby';\n\nconst SearchForm = ({query}) => (\n    // Using GET menas that we can ustilise deeplinking functionallity\n    <form role=\"search\" method=\"GET\">\n        <label htmlFor=\"search-input\"><h1>Search tags</h1></label>\n        <input\n            type=\"search\"\n            id=\"search-input\"\n            name=\"keywords\"\n            aria-control=\"search-results-count\"\n            onChange={(e) => navigate(`/search?keywords=${encodeURIComponent(e.target.value)}`)}\n            value={query}\n        />\n        <button type=\"submit\">Submit</button>\n    </form>\n);\n\nexport default SearchForm;","import React from 'react';\n\nconst SearchResults = ({ query, results }) => (\n    <section aria-label=\"Search results for all posts\">\n        {!!results.length && query &&\n\n            <h2 className=\"search-results-count\"\n                aria-live=\"assertive\" // This will tell assertive technologies that this field will update on the fly and this can be set to pollite or assertive\n            >Found {results.length} posts on \"{query}\"</h2>\n        }\n        {!!results.length &&\n            <ol className=\"search-results-list\">\n                {results.map(({\n                    title,\n                    user\n                }\n                ) => (\n                        <div key={title}>\n                            <h3 className=\"search-results-list__heading\">\n                                <a>{title}</a>\n                                <a>{user}</a>\n                            </h3>\n                        </div>\n                    ))}\n\n            </ol>\n        }\n\n    </section>\n);\n\nexport default SearchResults;","import React, { useState, useEffect } from 'react';\nimport Layout from '../components/layout';\nimport SearchForm from '../components/searchForm';\nimport SearchResults from '../components/searchResults';\n\n\nconst Search = ({\n    data,\n    location\n\n}) => {\n    const [results, setResults] = useState([]);\n    const searchQuery = new URLSearchParams(location.search).get('keywords') || '';\n    useEffect(() => {\n        if (window.__LUNR__) {\n            window.__LUNR__.__loaded.then(lunr => {\n                // lunr is loaded here\n                const refs = lunr.en.index.search(searchQuery);\n                const images = refs.map(({ ref }) => lunr.en.store[ref]);\n                setResults(images)\n                console.log(results)\n            });\n        }\n    }, [location.search]); // An empty array tells the component to only render once and not again\n    return (\n        <Layout\n            location={location}\n        >\n            <SearchForm query={searchQuery} />\n            <SearchResults\n                query={searchQuery}\n                results={results}\n            />\n        </Layout>\n    );\n};\n\nexport default Search;"],"sourceRoot":""}